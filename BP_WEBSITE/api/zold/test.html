<!DOCTYPE html>
<html>
<head>
<title>Simple Map</title>
<meta name="viewport" content="initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<script src="https://www.gstatic.com/firebasejs/3.6.0/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.5.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.5.2/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.5.2/firebase-messaging.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <style type="text/css">
      html, body { height: 100%; margin: 0; padding: 0; }
      #map { height: 100%; }
    </style>
<script>
  // Initialize Firebase
  var config = {
     apiKey: "AIzaSyBQchZ2V6xpY-SgQ9Z20-wFsL4xDx-Rw3w",
    authDomain: "busplanner-f496d.firebaseapp.com",
    databaseURL: "https://busplanner-f496d.firebaseio.com",
    storageBucket: "busplanner-f496d.appspot.com",
    messagingSenderId: "771650212189"
  };
  firebase.initializeApp(config);

firebase.auth().onAuthStateChanged(function(user) {
    if (user) {
        console.log ("logged");
        email = user.email;
        console.log (email);    
    } else {
        console.log ("Not logged");
    }
});

function initMap() {
  var uluru = {lat: 64.01, lng: 19.05};
          var map = new google.maps.Map(document.getElementById('map'), {
            center: {
              lat: 64.01,
              lng: 19.05
            },
            zoom: 14,
            styles: [{
              featureType: 'poi',
              stylers: [{
              visibility: 'on'
            }] // Turn off points of interest.
            }, {
              featureType: 'transit.station',
              stylers: [{
              visibility: 'on'
            }] // Turn off bus stations, train stations, etc.
            }],
            disableDoubleClickZoom: false
	
          });
		 
		//HERE THE INFO FROM DB 
		var contentString = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<h1 id="firstHeading" class="firstHeading">Uluru</h1>'+
            '<div id="bodyContent">'+
            '<p><b>Uluru</b>, also referred to as <b>Ayers Rock</b>, is a large ' +
            'sandstone rock formation in the southern part of the '+
            'Northern Territory, central Australia. It lies 335&#160;km (208&#160;mi) '+
            'south west of the nearest large town, Alice Springs; 450&#160;km '+
            '(280&#160;mi) by road. Kata Tjuta and Uluru are the two major '+
            'features of the Uluru - Kata Tjuta National Park. Uluru is '+
            'sacred to the Pitjantjatjara and Yankunytjatjara, the '+
            'Aboriginal people of the area. It has many springs, waterholes, '+
            'rock caves and ancient paintings. Uluru is listed as a World '+
            'Heritage Site.</p>'+
            '<p>Attribution: Uluru, <a href="https://en.wikipedia.org/w/index.php?title=Uluru&oldid=297882194">'+
            'https://en.wikipedia.org/w/index.php?title=Uluru</a> '+
            '(last visited June 22, 2009).</p>'+
            '</div>'+
            '</div>';
   
  var query = firebase.database().ref("UserRequest").orderByKey();
query.once("value")
  .then(function(snapshot) {
    
    for (var i = 1; i <= 2; ++i) {
   var lat = snapshot.child("UserRequest"+i+"/Latitude").val(); 
     
      var long = snapshot.child("UserRequest"+i+"/Longitude").val(); 
       
         var status = snapshot.child("UserRequest"+i+"/Status").val(); 
          var latLng = new google.maps.LatLng(lat,long);
                     
                    var infowindow = new google.maps.InfoWindow({
            content: status
        });
                    var marker = new google.maps.Marker({
                            position: latLng,
                        map: map,
						title:status
                    });
                     marker.addListener('click', function() {
            infowindow.open(map, marker);
        });
  }
});
		  //here to read from db THE MARK IS FOR EACH POINT
		  //TITLE SHOULD BE UNIQUE
}
    google.maps.event.addDomListener(window, "load", initMap);
</script>
  </head><?php
header("Access-Control-Allow-Origin: *");
?>
<script src="https://www.gstatic.com/firebasejs/3.6.0/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.5.2/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.5.2/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/3.5.2/firebase-messaging.js"></script>


<div class="background-image" id="backgroundimage"></div>
    <div class="content" id="content">
    <div class="row">
        <div class="col-md-3 col-sm-3 col-xs-3"></div>
        <div class="col-md-6 col-sm-6 col-xs-6">
            <div class="jumbotron" style="margin-top:9%" id="jumbo">
                <div class="row">
                    <h2 class="text-center" style="margin-bottom:5%; font-size:50px;">Enter your credentials</h2>
                    <div class="col-md-2 col-sm-2 col-xs-2"></div>
                    <div class="col-md-8 col-sm-8 col-xs-8"> 
                    <div class="form-group form-group-lg">
                        <input type="text" id="txtEmail" class="form-control" style="margin-bottom:3%" placeholder="Email">
                        <input type="text" id="txtPassword" class="form-control" placeholder="Password">
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary"  id="btnLogin2" style="min-width:20%">Log in</button>
                        <button type="button" class="btn btn-success" id="btnSignUp" style="min-width:20%">SignUp</button>
                        <button type="button" class="btn btn-default hide" id="btnLogout" style="min-width:20%">Log out</button>
                    </div>   
                    <h4 class="text-center">Did you forget your password? <a href="#">Click here</a></h4> 
                    </div>
                    <div class="col-md-2 col-sm-2 col-xs-2"></div>
                </div>
            </div>
        </div>
        <div class="col-md-3 col-sm-3 col-xs-3"></div>
    </div>
</div>

<script>
  // Initialize Firebase
  var config = {
     apiKey: "AIzaSyBQchZ2V6xpY-SgQ9Z20-wFsL4xDx-Rw3w",
    authDomain: "busplanner-f496d.firebaseapp.com",
    databaseURL: "https://busplanner-f496d.firebaseio.com",
    storageBucket: "busplanner-f496d.appspot.com",
    messagingSenderId: "771650212189"
  };
  firebase.initializeApp(config);
 
     
var ref = firebase.database().ref("Login");
ref.once("value")
  .then(function(snapshot) {
    var name = snapshot.child("Login1").val(); // { first: "Ada", last: "Lovelace"}
    console.log(name);
	var Login_id = snapshot.child("Login1").child("Login_id").val(); // "Ada"
	document.write(Login_id);
	var Password = snapshot.child("Login1").child("Password").val(); // "Lovelace"
	 document.write(Password);
	var User_name = snapshot.child("Login1").child("User_name").val();
	 document.write(User_name);
	var User_type_id= snapshot.child("Login1").child("User_type_id").val();
	 document.write(User_type_id);
  
  
    var elem = document.getElementById("txtEmail"); // Get text field

	//elem.value = "test"; // Change field
	//here make it as
	// elem.value=User_name
	//than redirect
	if (elem.value="test") {console.log(elem.value)}
    var ee=elem.value;
    console.log(ee);
	});
 </script>